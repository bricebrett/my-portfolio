{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/bricebrettinger/Desktop/OPENCLASSROOMS/my-portfolio/frontend/src/components/ContactForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { FormEvent, useState } from \"react\";\n\ntype Props = {\n  className?: string;\n  onSuccess?: () => void;\n};\n\ntype Values = {\n  name: string;\n  email: string;\n  message: string;\n  website: string;\n};\n\nconst initialValues: Values = {\n  name: \"\",\n  email: \"\",\n  message: \"\",\n  website: \"\",\n};\n\nexport default function ContactForm({ className = \"\", onSuccess }: Props) {\n  const [values, setValues] = useState<Values>(initialValues);\n  const [loading, setLoading] = useState(false);\n  const [sent, setSent] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  function handleChange(\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) {\n    const { name, value } = e.target;\n    setValues((v) => ({ ...v, [name]: value }));\n  }\n\n  function isEmail(v: string) {\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(v);\n  }\n\n  async function handleSubmit(e: FormEvent) {\n    e.preventDefault();\n    setError(null);\n    setSent(false);\n\n    if (!values.name || !values.email || !values.message) {\n      setError(\"Merci de remplir tous les champs.\");\n      return;\n    }\n    if (!isEmail(values.email)) {\n      setError(\"Merci d’entrer un email valide.\");\n      return;\n    }\n\n    try {\n      setLoading(true);\n\n      const base = (process.env.NEXT_PUBLIC_API_BASE_URL || \"\").replace(\n        /\\/$/,\n        \"\"\n      );\n      const url = base ? `${base}/api/contact` : \"/api/contact\";\n\n      const res = await fetch(url, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(values),\n      });\n\n      let data: unknown = null;\n      try {\n        data = await res.json();\n      } catch {\n        // certaines implémentations renvoient 204\n      }\n\n      const ok =\n        res.ok &&\n        (data == null ||\n          (typeof data === \"object\" &&\n            data !== null &&\n            \"ok\" in data &&\n            Boolean(data.ok)));\n\n      if (!ok) {\n        const msg =\n          (data &&\n            typeof data === \"object\" &&\n            // @ts-expect-error simple refinement\n            typeof data.error === \"string\" &&\n            // @ts-expect-error\n            data.error) ||\n          \"Erreur d’envoi\";\n        throw new Error(msg);\n      }\n\n      setSent(true);\n      setValues(initialValues);\n      onSuccess?.();\n    } catch (err: unknown) {\n      // ✅ no 'any'\n      const msg =\n        err instanceof Error ? err.message : \"Une erreur est survenue.\";\n      setError(msg);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <form\n      className={`contact-form ${className}`}\n      onSubmit={handleSubmit}\n      noValidate\n    >\n      {/* Honeypot (caché via CSS) */}\n      <input\n        type=\"text\"\n        name=\"website\"\n        value={values.website}\n        onChange={handleChange}\n        autoComplete=\"off\"\n        tabIndex={-1}\n        aria-hidden=\"true\"\n        className=\"contact-form__hp\"\n      />\n\n      <label className=\"contact-form__field\">\n        <input\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Your name\"\n          value={values.name}\n          onChange={handleChange}\n          disabled={loading}\n          aria-required=\"true\"\n        />\n      </label>\n\n      <label className=\"contact-form__field\">\n        <input\n          type=\"email\"\n          name=\"email\"\n          placeholder=\"Your Email\"\n          value={values.email}\n          onChange={handleChange}\n          disabled={loading}\n          aria-required=\"true\"\n        />\n      </label>\n\n      <label className=\"contact-form__field\">\n        <textarea\n          name=\"message\"\n          placeholder=\"Your Message\"\n          rows={6}\n          value={values.message}\n          onChange={handleChange}\n          disabled={loading}\n          aria-required=\"true\"\n        />\n      </label>\n\n      {error && (\n        <p className=\"contact-form__error\" role=\"alert\">\n          {error}\n        </p>\n      )}\n      {sent && (\n        <p className=\"contact-form__success\" role=\"status\">\n          Merci ! Votre message a bien été envoyé.\n        </p>\n      )}\n\n      <button\n        className=\"contact-form__submit\"\n        type=\"submit\"\n        disabled={loading}\n        aria-busy={loading}\n      >\n        {loading ? \"Sending…\" : \"Send It!\"}\n      </button>\n    </form>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///Users/bricebrettinger/Desktop/OPENCLASSROOMS/my-portfolio/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}}]
}